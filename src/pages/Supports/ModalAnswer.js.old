import React, { useEffect, useState } from 'react';
import PropTypes from 'prop-types';
import Modal from 'react-modal';

import { toast } from 'react-toastify';
import api from '~/services/api';

export default function ModalAnswer(props) {
  console.tron.log('ModalAnswer', props);

  const { id, openModal, onRequestClose } = props;

  const [modalData, setModalData] = useState({});

  console.tron.log(modalData);

  useEffect(() => {
    if (id) {
      const getData = async () => {
        try {
          const response = await api.get(`/help-orders/${id}`);

          setModalData(response.data);
        } catch (err) {
          toast.error('Ocorreu um erro');
        }
      };

      getData();
    }
  }, [id]);

  return (
    <Modal
      isOpen={openModal}
      onRequestClose={() => onRequestClose()}
      ariaHideApp={false}
    >
      <h3>PERGUNTA DO ALUNO</h3>
      <p>{modalData.question}</p>

      <h3>SUA RESPOSTA</h3>
    </Modal>
  );
}

ModalAnswer.defaultProps = {
  id: null,
  openModal: false,
};

ModalAnswer.propTypes = {
  id: PropTypes.number,
  openModal: PropTypes.bool,
  onRequestClose: PropTypes.func.isRequired,
};
